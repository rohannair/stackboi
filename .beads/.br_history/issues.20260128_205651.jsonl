{"id":"bd-11t","title":"US-001: Initialize stack metadata storage","description":"As a user, I want to initialize stackboi in my repo so that it can track my stacked branches.\n\n## Acceptance Criteria\n- [ ] `stackboi init` command creates `.stackboi.json` in repo root\n- [ ] Schema includes: stacks array, global settings, rerere preferences\n- [ ] Validates Git version is 2.38+ (required for --update-refs)\n- [ ] Adds `.stackboi.json` to `.gitignore` suggestion (user choice)\n- [ ] Detects existing `gh` CLI auth, fails gracefully if not authenticated\n- [ ] bun test passes\n- [ ] bun run typecheck passes\n- [ ] bun run lint passes","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-28T20:55:21.971574Z","created_by":"rohan","updated_at":"2026-01-28T20:55:21.972536Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-11t","depends_on_id":"bd-24r","type":"parent-child","created_at":"2026-01-28T20:55:21.972526Z","created_by":"rohan"}]}
{"id":"bd-16l","title":"US-003: Add branch to existing stack","description":"As a user, I want to add a new branch on top of my current stacked branch so that I can continue building dependent changes.\n\n## Acceptance Criteria\n- [ ] TUI command creates new branch from current HEAD\n- [ ] Adds branch to current stack's branch list in correct order\n- [ ] Records parent branch relationship in metadata\n- [ ] Switches to the new branch automatically\n- [ ] bun test passes\n- [ ] bun run typecheck passes\n- [ ] bun run lint passes","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-28T20:55:27.101034Z","created_by":"rohan","updated_at":"2026-01-28T20:55:27.101502Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-16l","depends_on_id":"bd-24r","type":"parent-child","created_at":"2026-01-28T20:55:27.101486Z","created_by":"rohan"}]}
{"id":"bd-1d8","title":"US-008: Configure and enable git rerere","description":"As a user, I want stackboi to configure git rerere so that conflict resolutions are remembered.\n\n## Acceptance Criteria\n- [ ] On init, enables `rerere.enabled = true` in local git config\n- [ ] Enables `rerere.autoUpdate = true` for automatic staging\n- [ ] Stores rerere training data in standard `.git/rr-cache`\n- [ ] Shows status of rerere (trained resolutions count) in TUI\n- [ ] bun test passes\n- [ ] bun run typecheck passes\n- [ ] bun run lint passes","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-28T20:55:42.862510Z","created_by":"rohan","updated_at":"2026-01-28T20:55:42.863051Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1d8","depends_on_id":"bd-24r","type":"parent-child","created_at":"2026-01-28T20:55:42.863038Z","created_by":"rohan"}]}
{"id":"bd-1fh","title":"US-015: Delete branch from stack","description":"As a user, I want to remove a branch from my stack (after merge or abandonment) so that the tree stays clean.\n\n## Acceptance Criteria\n- [ ] TUI command removes branch from stack metadata\n- [ ] Optionally deletes local branch\n- [ ] Optionally deletes remote branch\n- [ ] Re-links child branches to deleted branch's parent\n- [ ] Updates affected PRs' base branches on GitHub\n- [ ] bun test passes\n- [ ] bun run typecheck passes\n- [ ] bun run lint passes","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-28T20:56:10.111106Z","created_by":"rohan","updated_at":"2026-01-28T20:56:10.111593Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1fh","depends_on_id":"bd-24r","type":"parent-child","created_at":"2026-01-28T20:56:10.111583Z","created_by":"rohan"}]}
{"id":"bd-1kw","title":"US-016: Reorder branches in stack","description":"As a user, I want to reorder branches in my stack so that I can adjust dependencies.\n\n## Acceptance Criteria\n- [ ] TUI provides move up/down commands for selected branch\n- [ ] Validates reorder won't create impossible state\n- [ ] Triggers rebase to apply new order\n- [ ] Updates metadata with new order\n- [ ] Updates PR base branches accordingly\n- [ ] bun test passes\n- [ ] bun run typecheck passes\n- [ ] bun run lint passes","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-28T20:56:12.642970Z","created_by":"rohan","updated_at":"2026-01-28T20:56:12.643493Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1kw","depends_on_id":"bd-24r","type":"parent-child","created_at":"2026-01-28T20:56:12.643479Z","created_by":"rohan"}]}
{"id":"bd-1rx","title":"US-009: Handle conflicts with rerere resolution","description":"As a user, I want automatic conflict resolution using learned patterns so that repeated conflicts resolve automatically.\n\n## Acceptance Criteria\n- [ ] During rebase, git rerere automatically applies known resolutions\n- [ ] If rerere resolves all conflicts, rebase continues automatically\n- [ ] If unresolved conflicts remain, pauses rebase and notifies user\n- [ ] Shows which files have unresolved conflicts\n- [ ] Provides option to open editor or abort\n- [ ] bun test passes\n- [ ] bun run typecheck passes\n- [ ] bun run lint passes","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T20:55:53.752268Z","created_by":"rohan","updated_at":"2026-01-28T20:55:53.753868Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1rx","depends_on_id":"bd-24r","type":"parent-child","created_at":"2026-01-28T20:55:53.753856Z","created_by":"rohan"}]}
{"id":"bd-1xh","title":"US-007: Sync stack after merge","description":"As a user, I want to sync my stack after a PR is merged so that child branches are rebased correctly.\n\n## Acceptance Criteria\n- [ ] Fetches latest from remote (origin)\n- [ ] Identifies merged branch and all descendants in stack\n- [ ] Runs `git rebase --update-refs` to rebase descendants onto new base\n- [ ] --update-refs automatically updates all tracked branch pointers\n- [ ] Shows progress in TUI during rebase operation\n- [ ] On success, removes merged branch from stack metadata\n- [ ] bun test passes\n- [ ] bun run typecheck passes\n- [ ] bun run lint passes","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-28T20:55:39.513431Z","created_by":"rohan","updated_at":"2026-01-28T20:55:39.514006Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1xh","depends_on_id":"bd-24r","type":"parent-child","created_at":"2026-01-28T20:55:39.513991Z","created_by":"rohan"}]}
{"id":"bd-24r","title":"Stackboi - Stacked Diffs TUI","description":"TUI tool for managing stacked PRs on GitHub. Leverages Git 2.38+ --update-refs for automatic branch pointer updates during rebase, combined with git rerere for conflict resolution learning. Handles squash merges gracefully.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-28T20:55:09.939020Z","created_by":"rohan","updated_at":"2026-01-28T20:55:09.939020Z","external_ref":"prd:./tasks/prd-stackboi.md","compaction_level":0,"original_size":0}
{"id":"bd-277","title":"US-013: View PR in browser","description":"As a user, I want to quickly open a PR in my browser so that I can review or share it.\n\n## Acceptance Criteria\n- [ ] Keyboard shortcut from tree view opens selected branch's PR\n- [ ] Uses `gh pr view --web` or equivalent\n- [ ] Shows error if branch doesn't have a PR yet\n- [ ] bun test passes\n- [ ] bun run typecheck passes\n- [ ] bun run lint passes","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-28T20:56:06.090136Z","created_by":"rohan","updated_at":"2026-01-28T20:56:06.090634Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-277","depends_on_id":"bd-24r","type":"parent-child","created_at":"2026-01-28T20:56:06.090620Z","created_by":"rohan"}]}
{"id":"bd-2j2","title":"US-011: Create GitHub PR from branch","description":"As a user, I want to create a PR for my current branch so that it's linked to the stack.\n\n## Acceptance Criteria\n- [ ] TUI command opens PR creation flow\n- [ ] Automatically sets base branch to parent branch in stack (or stack root if first)\n- [ ] Suggests PR title from branch name or first commit\n- [ ] Adds stack visualization to PR description\n- [ ] Adds label indicating stack position (e.g., `stack:2/4`)\n- [ ] Opens created PR in browser\n- [ ] bun test passes\n- [ ] bun run typecheck passes\n- [ ] bun run lint passes","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T20:56:00.372853Z","created_by":"rohan","updated_at":"2026-01-28T20:56:00.375345Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2j2","depends_on_id":"bd-24r","type":"parent-child","created_at":"2026-01-28T20:56:00.375329Z","created_by":"rohan"}]}
{"id":"bd-2yk","title":"US-012: Update PR metadata after sync","description":"As a user, I want PR base branches and descriptions to update after syncing so that GitHub reflects the current state.\n\n## Acceptance Criteria\n- [ ] After successful sync, updates base branch of affected PRs via GitHub API\n- [ ] Updates stack visualization in PR descriptions\n- [ ] Updates stack position labels if order changed\n- [ ] Uses `gh` CLI for all GitHub operations\n- [ ] bun test passes\n- [ ] bun run typecheck passes\n- [ ] bun run lint passes","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T20:56:03.155597Z","created_by":"rohan","updated_at":"2026-01-28T20:56:03.156123Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2yk","depends_on_id":"bd-24r","type":"parent-child","created_at":"2026-01-28T20:56:03.156109Z","created_by":"rohan"}]}
{"id":"bd-345","title":"US-002: Create new stack with initial branch","description":"As a user, I want to create a new stack from my current branch so that I can start building dependent changes.\n\n## Acceptance Criteria\n- [ ] TUI command creates a new stack entry in metadata\n- [ ] Records base branch (e.g., `main`) as stack root\n- [ ] Creates first feature branch with user-provided name\n- [ ] Switches to the new branch automatically\n- [ ] Updates metadata with branch -> stack relationship\n- [ ] bun test passes\n- [ ] bun run typecheck passes\n- [ ] bun run lint passes","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-28T20:55:24.433396Z","created_by":"rohan","updated_at":"2026-01-28T20:55:24.433949Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-345","depends_on_id":"bd-24r","type":"parent-child","created_at":"2026-01-28T20:55:24.433933Z","created_by":"rohan"}]}
{"id":"bd-3pd","title":"US-006: Prompt sync on merge detection","description":"As a user, I want to be prompted when a PR is merged so that I can sync child branches.\n\n## Acceptance Criteria\n- [ ] Shows notification overlay when merge detected\n- [ ] Notification shows which PR was merged and affected child branches\n- [ ] Offers \"Sync now?\" prompt with Y/N\n- [ ] \"N\" dismisses and updates status indicator to show pending sync\n- [ ] \"Y\" triggers sync operation (US-007)\n- [ ] bun test passes\n- [ ] bun run typecheck passes\n- [ ] bun run lint passes","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T20:55:36.515153Z","created_by":"rohan","updated_at":"2026-01-28T20:55:36.516028Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3pd","depends_on_id":"bd-24r","type":"parent-child","created_at":"2026-01-28T20:55:36.516010Z","created_by":"rohan"}]}
{"id":"bd-3tn","title":"US-004: Display stack tree view","description":"As a user, I want to see all my stacks in a tree visualization so that I can understand the current state.\n\n## Acceptance Criteria\n- [ ] Ink-based TUI renders tree with branch hierarchy\n- [ ] Each branch shows: name, PR number (if exists), PR status, sync status\n- [ ] Sync status indicates: up-to-date, needs push, needs rebase, conflicts\n- [ ] Tree uses box-drawing characters for clear hierarchy\n- [ ] Keyboard navigation: arrow keys to move, enter to select\n- [ ] bun test passes\n- [ ] bun run typecheck passes\n- [ ] bun run lint passes","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T20:55:30.906656Z","created_by":"rohan","updated_at":"2026-01-28T20:55:30.907160Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3tn","depends_on_id":"bd-24r","type":"parent-child","created_at":"2026-01-28T20:55:30.907145Z","created_by":"rohan"}]}
{"id":"bd-nbj","title":"US-014: Switch between stacks (tabs)","description":"As a user, I want to switch between multiple independent stacks so that I can manage separate workstreams.\n\n## Acceptance Criteria\n- [ ] Tab bar or selector shows all stacks\n- [ ] Stacks labeled by base branch or custom name\n- [ ] Keyboard shortcut to cycle through stacks\n- [ ] Selected stack determines which tree is displayed\n- [ ] bun test passes\n- [ ] bun run typecheck passes\n- [ ] bun run lint passes","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-28T20:56:08.550169Z","created_by":"rohan","updated_at":"2026-01-28T20:56:08.550631Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-nbj","depends_on_id":"bd-24r","type":"parent-child","created_at":"2026-01-28T20:56:08.550617Z","created_by":"rohan"}]}
{"id":"bd-rmd","title":"US-005: Poll GitHub for PR status updates","description":"As a user, I want the TUI to check GitHub for merged PRs so that I know when to sync my stack.\n\n## Acceptance Criteria\n- [ ] Uses `gh` CLI to fetch PR status for all tracked branches\n- [ ] Polls on configurable interval (default: 30 seconds) when TUI is open\n- [ ] Updates tree view status indicators in real-time\n- [ ] Detects when a PR has been merged (any strategy)\n- [ ] bun test passes\n- [ ] bun run typecheck passes\n- [ ] bun run lint passes","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T20:55:33.324833Z","created_by":"rohan","updated_at":"2026-01-28T20:55:33.325692Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-rmd","depends_on_id":"bd-24r","type":"parent-child","created_at":"2026-01-28T20:55:33.325678Z","created_by":"rohan"}]}
{"id":"bd-sz1","title":"US-010: Push all branches in stack","description":"As a user, I want to push all branches in my stack so that GitHub PRs are updated.\n\n## Acceptance Criteria\n- [ ] TUI command pushes all branches in selected stack\n- [ ] Uses `--force-with-lease` for safety\n- [ ] Shows progress per branch\n- [ ] Reports success/failure for each branch\n- [ ] Handles case where branch doesn't have upstream yet (sets upstream)\n- [ ] bun test passes\n- [ ] bun run typecheck passes\n- [ ] bun run lint passes","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T20:55:56.424814Z","created_by":"rohan","updated_at":"2026-01-28T20:55:56.425838Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-sz1","depends_on_id":"bd-24r","type":"parent-child","created_at":"2026-01-28T20:55:56.425822Z","created_by":"rohan"}]}
